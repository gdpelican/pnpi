<% readonly = true if !defined? readonly %>
<%= semantic_form_for @resource, url: @resource.url(:show), html: { class: "#{'readonly' if readonly }" } do |f| %>
	<%= form_title %>
	<%= f.inputs :picture, class: 'block fifth' do %>
		<%= content_tag :div, '', class: 'block-padding' do %>
			<%= image_tag f.object.picture.url %>
			<%= f.input :picture, label: false, button_html: { value: 'Change picture' } %>
		<% end %>
	<% end %>
	
	<%= f.inputs :basic, class: 'block two-fifth' do %>
		<%= content_tag :div, '', class: 'block-padding' do %>
			<%= render partial: "/resources/forms/#{f.object.type.downcase}", locals: { f: f, readonly: readonly } %>
		<% end %>
	<% end %>
	
	<%= f.inputs :tags, class: 'block two-fifth' do %>
		<%= content_tag :div, '', class: 'block-padding' do %>
			<%= f.object.thing? ? f.object.category_message : check_box_collection(f, :categories, @categories, readonly) %>
			<% @tags.each do |tag| %>
				<%= check_box_collection f, :tags, tag[1], readonly, tag[0], :tag %>
			<% end %>
		<% end %>
	<% end %>
	
	<%= f.submit %>
	
<% end %>